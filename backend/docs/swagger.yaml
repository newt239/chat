definitions:
  auth.AuthOutput:
    properties:
      accessToken:
        type: string
      expiresAt:
        type: string
      refreshToken:
        type: string
      user:
        $ref: '#/definitions/auth.UserInfo'
    type: object
  auth.LogoutOutput:
    properties:
      success:
        type: boolean
    type: object
  auth.UserInfo:
    properties:
      avatarUrl:
        type: string
      displayName:
        type: string
      email:
        type: string
      id:
        type: string
    type: object
  channel.ChannelOutput:
    properties:
      createdAt:
        type: string
      createdBy:
        type: string
      description:
        type: string
      id:
        type: string
      isPrivate:
        type: boolean
      name:
        type: string
      updatedAt:
        type: string
      workspaceId:
        type: string
    type: object
  handler.AddMemberRequest:
    properties:
      role:
        type: string
      userId:
        type: string
    type: object
  handler.CreateChannelRequest:
    properties:
      description:
        type: string
      isPrivate:
        type: boolean
      name:
        type: string
    type: object
  handler.CreateMessageRequest:
    properties:
      body:
        type: string
      parentId:
        type: string
    type: object
  handler.CreateWorkspaceRequest:
    properties:
      description:
        type: string
      name:
        type: string
    type: object
  handler.ErrorResponse:
    properties:
      error:
        type: string
    type: object
  handler.LoginRequest:
    properties:
      email:
        type: string
      password:
        type: string
    required:
    - email
    - password
    type: object
  handler.LogoutRequest:
    properties:
      refreshToken:
        type: string
    required:
    - refreshToken
    type: object
  handler.RefreshTokenRequest:
    properties:
      refreshToken:
        type: string
    required:
    - refreshToken
    type: object
  handler.RegisterRequest:
    properties:
      displayName:
        minLength: 1
        type: string
      email:
        type: string
      password:
        minLength: 8
        type: string
    required:
    - displayName
    - email
    - password
    type: object
  handler.UpdateMemberRoleRequest:
    properties:
      role:
        type: string
    type: object
  handler.UpdateReadStateRequest:
    properties:
      lastReadAt:
        type: string
    type: object
  handler.UpdateWorkspaceRequest:
    properties:
      description:
        type: string
      iconUrl:
        type: string
      name:
        type: string
    type: object
  message.ListMessagesOutput:
    properties:
      hasMore:
        type: boolean
      messages:
        items:
          $ref: '#/definitions/message.MessageOutput'
        type: array
    type: object
  message.MessageOutput:
    properties:
      body:
        type: string
      channelId:
        type: string
      createdAt:
        type: string
      deletedAt:
        type: string
      editedAt:
        type: string
      id:
        type: string
      parentId:
        type: string
      userId:
        type: string
    type: object
  readstate.UnreadCountOutput:
    properties:
      count:
        type: integer
    type: object
  workspace.CreateWorkspaceOutput:
    properties:
      workspace:
        $ref: '#/definitions/workspace.WorkspaceOutput'
    type: object
  workspace.DeleteWorkspaceOutput:
    properties:
      success:
        type: boolean
    type: object
  workspace.GetWorkspaceOutput:
    properties:
      workspace:
        $ref: '#/definitions/workspace.WorkspaceOutput'
    type: object
  workspace.GetWorkspacesOutput:
    properties:
      workspaces:
        items:
          $ref: '#/definitions/workspace.WorkspaceOutput'
        type: array
    type: object
  workspace.ListMembersOutput:
    properties:
      members:
        items:
          $ref: '#/definitions/workspace.MemberInfo'
        type: array
    type: object
  workspace.MemberActionOutput:
    properties:
      success:
        type: boolean
    type: object
  workspace.MemberInfo:
    properties:
      avatarUrl:
        type: string
      displayName:
        type: string
      email:
        type: string
      joinedAt:
        type: string
      role:
        type: string
      userId:
        type: string
    type: object
  workspace.UpdateWorkspaceOutput:
    properties:
      workspace:
        $ref: '#/definitions/workspace.WorkspaceOutput'
    type: object
  workspace.WorkspaceOutput:
    properties:
      createdAt:
        type: string
      createdBy:
        type: string
      description:
        type: string
      iconUrl:
        type: string
      id:
        type: string
      name:
        type: string
      role:
        type: string
      updatedAt:
        type: string
    type: object
info:
  contact: {}
paths:
  /api/auth/login:
    post:
      consumes:
      - application/json
      description: Authenticate user and return tokens
      parameters:
      - description: Login request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/auth.AuthOutput'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Login
      tags:
      - auth
  /api/auth/logout:
    post:
      consumes:
      - application/json
      description: Revoke refresh token and logout user
      parameters:
      - description: Logout request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.LogoutRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/auth.LogoutOutput'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Logout
      tags:
      - auth
  /api/auth/refresh:
    post:
      consumes:
      - application/json
      description: Get a new access token using refresh token
      parameters:
      - description: Refresh token request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.RefreshTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/auth.AuthOutput'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Refresh access token
      tags:
      - auth
  /api/auth/register:
    post:
      consumes:
      - application/json
      description: Create a new user account
      parameters:
      - description: Registration request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/auth.AuthOutput'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Register a new user
      tags:
      - auth
  /api/channels/{channelId}/messages:
    get:
      description: Returns messages in the specified channel
      parameters:
      - description: Channel ID
        in: path
        name: channelId
        required: true
        type: string
      - description: Number of messages to return (1-100, default 50)
        in: query
        name: limit
        type: integer
      - description: Return messages created after this timestamp (RFC3339)
        in: query
        name: since
        type: string
      - description: Return messages created before this timestamp (RFC3339)
        in: query
        name: until
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/message.ListMessagesOutput'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List channel messages
      tags:
      - message
    post:
      consumes:
      - application/json
      description: Creates a new message within the specified channel
      parameters:
      - description: Channel ID
        in: path
        name: channelId
        required: true
        type: string
      - description: Create message request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.CreateMessageRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/message.MessageOutput'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create a message
      tags:
      - message
  /api/channels/{channelId}/reads:
    post:
      consumes:
      - application/json
      parameters:
      - description: Channel ID
        in: path
        name: channelId
        required: true
        type: string
      - description: Update read state request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateReadStateRequest'
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update channel read state
      tags:
      - message
  /api/channels/{channelId}/unread_count:
    get:
      parameters:
      - description: Channel ID
        in: path
        name: channelId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/readstate.UnreadCountOutput'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get unread message count for a channel
      tags:
      - message
  /api/workspaces:
    get:
      description: Get all workspaces that the authenticated user is a member of
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/workspace.GetWorkspacesOutput'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user workspaces
      tags:
      - workspace
    post:
      consumes:
      - application/json
      description: Create a new workspace
      parameters:
      - description: Create workspace request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.CreateWorkspaceRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/workspace.CreateWorkspaceOutput'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create workspace
      tags:
      - workspace
  /api/workspaces/{id}:
    delete:
      description: Delete a workspace (owner only)
      parameters:
      - description: Workspace ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/workspace.DeleteWorkspaceOutput'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete workspace
      tags:
      - workspace
    get:
      description: Get details of a specific workspace
      parameters:
      - description: Workspace ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/workspace.GetWorkspaceOutput'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get workspace details
      tags:
      - workspace
    patch:
      consumes:
      - application/json
      description: Update workspace details (admin/owner only)
      parameters:
      - description: Workspace ID
        in: path
        name: id
        required: true
        type: string
      - description: Update workspace request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateWorkspaceRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/workspace.UpdateWorkspaceOutput'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update workspace
      tags:
      - workspace
  /api/workspaces/{id}/channels:
    get:
      description: Returns channels accessible to the authenticated user within the
        workspace
      parameters:
      - description: Workspace ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/channel.ChannelOutput'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List channels in a workspace
      tags:
      - channel
    post:
      consumes:
      - application/json
      description: Creates a new channel in the specified workspace
      parameters:
      - description: Workspace ID
        in: path
        name: id
        required: true
        type: string
      - description: Create channel request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.CreateChannelRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/channel.ChannelOutput'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create a channel
      tags:
      - channel
  /api/workspaces/{id}/members:
    get:
      description: Get all members of a workspace
      parameters:
      - description: Workspace ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/workspace.ListMembersOutput'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List workspace members
      tags:
      - workspace
    post:
      consumes:
      - application/json
      description: Add a user to a workspace (admin/owner only)
      parameters:
      - description: Workspace ID
        in: path
        name: id
        required: true
        type: string
      - description: Add member request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.AddMemberRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/workspace.MemberActionOutput'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Add workspace member
      tags:
      - workspace
  /api/workspaces/{id}/members/{userId}:
    delete:
      description: Remove a user from a workspace (admin/owner only)
      parameters:
      - description: Workspace ID
        in: path
        name: id
        required: true
        type: string
      - description: User ID
        in: path
        name: userId
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/workspace.MemberActionOutput'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Remove workspace member
      tags:
      - workspace
    patch:
      consumes:
      - application/json
      description: Update a member's role in a workspace (owner only)
      parameters:
      - description: Workspace ID
        in: path
        name: id
        required: true
        type: string
      - description: User ID
        in: path
        name: userId
        required: true
        type: string
      - description: Update role request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateMemberRoleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/workspace.MemberActionOutput'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update member role
      tags:
      - workspace
swagger: "2.0"
